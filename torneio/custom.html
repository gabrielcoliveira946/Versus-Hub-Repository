<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- estilos globais -->
  <link rel="stylesheet" href="/pagina_inicial/css/estilos.css" />
  <!-- estilos espec√≠ficos de detalhes -->
  <link rel="stylesheet" href="/torneio/detalhes.css" />
  <link rel="icon" href="/image/logo.png" sizes="32x32"> 
  <title>Detalhes do Torneio - VersusHub</title>
</head>
<body>

  <!-- ========= HEADER ========= -->
  <header>
    <nav class="navbar">

      <div class="header-left">
        <button id="menuToggle" class="menu-button">
          <img src="/images/pngtree-menu-icon-image_1344445.png" alt="Menu">
        </button>

        <div class="logo_header">
          <a href="/pagina_inicial/index.html">
            <img src="/image/logo plus tipo textura.png" alt="VersusHub">
          </a>
        </div>
      </div>

      <div class="botoes_header">
        <a href="/aovivo/aovivo.html"><button id="aovivo_header">Ao Vivo</button></a>
        <a href="/criar_torneio/criar_torneio.html"><button id="criar_header">Criar Torneio</button></a>
        <a href="/equipes/equipes.html"> <button id="equipes_header">Equipes</button> </a>
      </div>

      <div class="header-right">
        <form class="search-header" action="#" onsubmit="return false">
          <input type="text" placeholder="Buscar torneios, jogos..." id="searchInput">
          <button type="submit" id="searchBtn">üîç</button>
        </form>

        <a href="/login/login.html" id="btentrar">Entrar</a>
        <a href="/cadastro/cadastro.html" id="btcadastrar">Cadastrar-se</a>

        <div class="user-icon">
          <img src="/image/boneco_logo_ofc.png" alt="Usu√°rio" id="userBtn">
          <ul id="menuUser" class="hidden"></ul>
        </div>
      </div>

    </nav>
  </header>
  <!-- ========= FIM HEADER ========= -->

  <!-- ===== SIDEBAR ==== -->
  <aside id="sidebar" class="sidebar">
    <h2 class="sidebar-title"></h2>
    <nav class="sidebar-nav">
      <a href="/pagina_inicial/index.html">üè† In√≠cio</a>
      <a href="/pagina_inicial/torneios.html">üèÜ Todos os torneios</a>
     <a href="/criar_torneio/criar_torneio.html">üéñÔ∏è Criar Torneio</a>
     <a href="/equipes/equipes.html">üë• Equipes</a>
      <a href="/gerenciartorneios/gerentornindex.html">üìÑ Gerenciar torneios</a>
     <a href="/termos/termos.html">üíº Termos de Uso</a>
      <a href="#feedback">‚≠ê Enviar feedback / Sugest√£o</a>
    </nav>
  </aside>

  <!-- efeito da tela ficar escura no fundo -->

  <div id="sidebarOverlay" class="sidebar-overlay"></div>

  <!-- ===== FIM SIDEBAR ===== -->


  <!-- ========= CONTE√öDO DIN√ÇMICO ========= -->
  <main class="torneio-page" id="torneioPage" style="display:none;">

    <!-- HERO DO TORNEIO -->
    <section class="torneio-hero">
      <div class="torneio-banner">
        <img id="torneioBanner" src="" alt="Banner do torneio">
        <div class="torneio-status-badge" id="torneioStatusBadge">
          <!-- texto do status aqui -->
        </div>
      </div>

      <div class="torneio-hero-info">
        <h1 id="torneioTitulo">Nome do Torneio</h1>
        <p class="torneio-meta" id="torneioMeta">Jogo ‚Ä¢ Categoria ‚Ä¢ Plataforma</p>
        <p class="torneio-data" id="torneioData">In√≠cio: --/--/----</p>

        <div class="torneio-tags">
          <span id="tagModalidade">Modalidade: --</span>
          <span id="tagLocalizacao">Localiza√ß√£o: --</span>
          <span id="tagTaxa">Taxa: --</span>
        </div>
      </div>
    </section>

    <!-- LAYOUT EM 2 COLUNAS -->
    <section class="torneio-layout">

      <!-- COLUNA ESQUERDA -->
      <div class="torneio-col-info">

        <div class="torneio-card-box">
          <h2>Sobre o torneio</h2>
          <p id="descrTorneio">
            Nenhuma descri√ß√£o informada.
          </p>
        </div>

        <div class="torneio-card-box">
          <h2>Regras principais</h2>
          <ul id="listaRegras">
            <!-- regras em <li> -->
          </ul>
        </div>

        <div class="torneio-card-box">
          <h2>Requisitos dos jogadores</h2>
          <p id="textoRequisitos">
            Nenhum requisito especial informado.
          </p>
        </div>

      </div>

      <!-- COLUNA DIREITA -->
      <aside class="torneio-col-side">

        <div class="torneio-card-box destaque-inscricao">
          <h2>Inscri√ß√µes</h2>
          <ul class="info-list">
            <li><span>Status:</span> <span id="textoStatus">--</span></li>
            <li><span>Plataforma:</span> <span id="textoPlataforma">--</span></li>
            <li><span>Taxa:</span> <span id="textoTaxa2">--</span></li>
          </ul>
        </div>

        <div class="torneio-card-box">
          <h2>Premia√ß√£o</h2>
          <p id="textoSemPremio" style="display:none;">N√£o h√° premia√ß√£o definida para este torneio.</p>

          <ul class="info-list" id="listaPremios">
            <li id="liPremio1" style="display:none;"><span>1¬∫ lugar:</span> <span id="premio1Texto"></span></li>
            <li id="liPremio2" style="display:none;"><span>2¬∫ lugar:</span> <span id="premio2Texto"></span></li>
            <li id="liPremio3" style="display:none;"><span>3¬∫ lugar:</span> <span id="premio3Texto"></span></li>
            <li id="liPremioExtra" style="display:none;"><span>Extras:</span> <span id="premioExtraTexto"></span></li>
          </ul>
        </div>

      </aside>

    </section>
  </main>

  <!-- Caso o torneio n√£o seja encontrado -->
  <main id="erroTorneio" class="torneio-page" style="display:none;">
    <section class="torneio-card-box">
      <h2>Torneio n√£o encontrado</h2>
      <p>N√£o conseguimos localizar esse torneio nos seus dados locais.  
      Verifique se ele ainda existe em <strong>Gerenciar torneios &gt; Seus torneios</strong>.</p>
    </section>
  </main>

  <!-- ========= FOOTER ========= -->
  <footer>
    <div id="footer_content">
      <div id="footer_logo">
        <img src="/image/logo.png" alt="" id="logofooter">
      </div>

      <div id="footer_sobrenos">
        <h1>Sobre N√≥s</h1>
        <br>
        <p>O Versus Hub √© uma plataforma criada para conectar jogadores, organizadores e f√£s de e-sports.</p>
      </div>

      <div id="footer_versushub">
        <h1>Versus Hub</h1>
        <br>
        <p>
          Torneios e Rankings atualizados <br><br>
          Sistema seguro <br><br>
          Suporte ativo todos os dias
        </p>
      </div>

      <div id="footer_politicas">
        <h1>Pol√≠ticas</h1><br>
        <li>Termos de uso</li><br>
        <li>Pol√≠tica de Privacidade</li><br>
        <li>Reembolsos</li>
      </div>
    </div>
  </footer>
  <!-- ========= FIM FOOTER ========= -->

  <!-- ========= SCRIPTS ========= -->
  <script src="/pagina_inicial/js/scrip.js"></script>

  <script>
    // Pegar par√¢metro ?id= da URL
    function getParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function loadArray(key) {
      try {
        return JSON.parse(localStorage.getItem(key) || '[]');
      } catch (e) {
        return [];
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const id = getParam('id');

      if (!id) {
        document.getElementById('erroTorneio').style.display = 'block';
        return;
      }

      const created  = loadArray('vh_createdTournaments');
      const joined   = loadArray('vh_joinedTournaments');
      const visited  = loadArray('vh_visitedTournaments');

      // procura o torneio pelo id em qualquer um dos arrays
      const todos = [...created, ...joined, ...visited];
      const torneio = todos.find(t => t.id === id);

      if (!torneio) {
        document.getElementById('erroTorneio').style.display = 'block';
        return;
      }

      // Mostra o bloco principal
      document.getElementById('torneioPage').style.display = 'block';

      // --- Preenche HERO ---
      const bannerImg = document.getElementById('torneioBanner');
      bannerImg.src = torneio.banner || '/images/cerradocup.jpg';
      bannerImg.alt = torneio.nome || 'Banner do torneio';

      const badge = document.getElementById('torneioStatusBadge');
      badge.textContent = torneio.status || 'Status n√£o informado';
      badge.classList.add(torneio.statusClass || '');

      document.getElementById('torneioTitulo').textContent = torneio.nome || 'Torneio sem nome';
      document.getElementById('torneioMeta').textContent   = torneio.jogo || 'Jogo n√£o informado';
      document.getElementById('torneioData').textContent   = torneio.data || 'Data n√£o informada';

      // Tags
      const modalidadeTexto = torneio.modalidade === 'presencial' ? 'Presencial' : 'Online';
      document.getElementById('tagModalidade').textContent =
        'Modalidade: ' + modalidadeTexto;

      document.getElementById('tagLocalizacao').textContent =
        'Localiza√ß√£o: ' + (torneio.localizacao || 'N√£o informada');

      // Taxa
      let taxaText = 'Gratuito';
      if (torneio.taxaTipo === 'pago') {
        taxaText = 'Pago';
        if (torneio.taxaValor) {
          taxaText += ' - R$ ' + Number(torneio.taxaValor).toFixed(2).replace('.', ',');
        }
      }
      document.getElementById('tagTaxa').textContent = 'Taxa: ' + taxaText;
      document.getElementById('textoTaxa2').textContent = taxaText;

      // Plataforma (a gente reaproveita texto que j√° vem em torneio.jogo)
      document.getElementById('textoPlataforma').textContent =
        torneio.jogo || '--';

      // Status
      document.getElementById('textoStatus').textContent =
        torneio.status || '--';

      // Descri√ß√£o
      document.getElementById('descrTorneio').textContent =
        torneio.descricao && torneio.descricao.trim()
          ? torneio.descricao
          : 'Nenhuma descri√ß√£o informada.';

      // Regras (quebra por linha e cria <li>)
      const listaRegras = document.getElementById('listaRegras');
      listaRegras.innerHTML = '';
      if (torneio.regras && torneio.regras.trim()) {
        torneio.regras.split('\n').forEach(linha => {
          const texto = linha.trim();
          if (!texto) return;
          const li = document.createElement('li');
          li.textContent = texto;
          listaRegras.appendChild(li);
        });
      } else {
        const li = document.createElement('li');
        li.textContent = 'Nenhuma regra espec√≠fica informada.';
        listaRegras.appendChild(li);
      }

      // Requisitos
      document.getElementById('textoRequisitos').textContent =
        torneio.requisitos && torneio.requisitos.trim()
          ? torneio.requisitos
          : 'Nenhum requisito especial informado.';

      // Premia√ß√£o
      const tipoPremio = torneio.tipoPremio || 'nenhuma';
      const textoSem = document.getElementById('textoSemPremio');
      const li1 = document.getElementById('liPremio1');
      const li2 = document.getElementById('liPremio2');
      const li3 = document.getElementById('liPremio3');
      const liExtra = document.getElementById('liPremioExtra');

      // esconde tudo de in√≠cio
      textoSem.style.display = 'none';
      li1.style.display = 'none';
      li2.style.display = 'none';
      li3.style.display = 'none';
      liExtra.style.display = 'none';

      if (tipoPremio === 'nenhuma') {
        textoSem.style.display = 'block';
      } else {
        if (torneio.premio1 && torneio.premio1.trim()) {
          li1.style.display = 'list-item';
          document.getElementById('premio1Texto').textContent = torneio.premio1;
        }
        if (torneio.premio2 && torneio.premio2.trim()) {
          li2.style.display = 'list-item';
          document.getElementById('premio2Texto').textContent = torneio.premio2;
        }
        if (torneio.premio3 && torneio.premio3.trim()) {
          li3.style.display = 'list-item';
          document.getElementById('premio3Texto').textContent = torneio.premio3;
        }
        if (torneio.premiacaoExtra && torneio.premiacaoExtra.trim()) {
          liExtra.style.display = 'list-item';
          document.getElementById('premioExtraTexto').textContent = torneio.premiacaoExtra;
        }

        // se mesmo assim tudo vazio, mostra texto padr√£o
        if (
          li1.style.display === 'none' &&
          li2.style.display === 'none' &&
          li3.style.display === 'none' &&
          liExtra.style.display === 'none'
        ) {
          textoSem.style.display = 'block';
        }
      }
    });
  </script>
</body>
</html>
